---
import WhatsappIcon from "#assets/icons/WhatsappIcon.astro";
import BurguerMenuIcon from "#assets/icons/BurguerMenuIcon.astro";
import logo from "#assets/images/logo1.webp";
import FacebookIcon from "#assets/icons/FacebookIcon.astro";
import TiktokIcon from "#assets/icons/TiktokIcon.astro";
import InstagramIcon from "#assets/icons/InstagramIcon.astro";
import CloseIcon from "#assets/icons/CloseIcon.astro";

const phone = "51932120023";
const message = "Buen día! Me gustaría comprar un producto.";
const encodedMessage = encodeURIComponent(message);
---

<section class="max-w-7xl mx-auto">
  <nav
    class="h-[14dvh] flex justify-between items-center py-3 px-5 shadow-b-md"
  >
    <a href="/" aria-label="Irides Home" title="Irides Home">
      <img
        src={logo.src}
        alt="Logo Irides"
        class="h-full w-22"
        loading="eager"
      />
    </a>

    <ul class="flex gap-5 items-center text-primary text-lg font-semibold">
      <li class="hidden sm:block">
        <a
          href="/products"
          title="View Products"
          aria-label="Products"
          class="hover:after:content-[''] hover:after:block hover:after:w-full hover:after:h-0.5 hover:after:bg-badge hover:after:mt-0.5 transition-all ease-in-out duration-300 hover:after:cursor-pointer"
          >Products</a
        >
      </li>
      <li class="hidden sm:block">
        <a
          href="/recipes"
          title="Explore Recipes"
          aria-label="Recipes"
          class="hover:after:content-[''] hover:after:block hover:after:w-full hover:after:h-0.5 hover:after:bg-badge hover:after:mt-0.5 transition-all ease-in-out duration-300 hover:after:cursor-pointer"
          >Recipes</a
        >
      </li>
      <li class="hidden sm:block">
        <a
          href="/contact-us"
          title="Contact Us"
          aria-label="Contact Us"
          class="hover:after:content-[''] hover:after:block hover:after:w-full hover:after:h-0.5 hover:after:bg-badge hover:after:mt-0.5 transition-all ease-in-out duration-300 hover:after:cursor-pointer"
          >Contact Us</a
        >
      </li>
      <li class="hidden sm:block">
        <a
          href="/about-us"
          title="About Us"
          aria-label="About Us"
          class="hover:after:content-[''] hover:after:block hover:after:w-full hover:after:h-0.5 hover:after:bg-badge hover:after:mt-0.5 transition-all ease-in-out duration-300 hover:after:cursor-pointer"
          >About Us</a
        >
      </li>
      <span
        id="burguer-menu"
        class="flex sm:hidden cursor-pointer bg-btn-primary/85 backdrop-blur-lg rounded-full p-2 hover:bg-primary/85 transition-colors ease-in-out duration-300"
      >
        <BurguerMenuIcon class={"text-light-bg size-6"} />
      </span>
      <a
        href={`https://wa.me/${phone}?text=${encodedMessage}`}
        aria-label="Shop Now on WhatsApp"
        title="Shop Now on WhatsApp"
        target="_blank"
        class="hidden sm:flex justify-center items-center gap-1 rounded-full bg-btn-primary border-2 border-btn-primary px-2 py-1 font-semibold text-light-bg cursor-pointer transition-all ease-in-out duration-250 hover:border-2 hover:border-primary hover:bg-primary hover:text-body-bg md:gap-2 md:px-3 md:py-1 md:text-lg"
      >
        <WhatsappIcon class={"size-7"} />
        Shop Now
      </a>
    </ul>
  </nav>
  <aside
    id="mobile-menu"
    class="hidden fixed top-0 right-0 z-60 w-[75dvw] h-dvh bg-dark-bg bg-radial-[at_45%_20%] from-[#15437f] to-dark-bg py-4 px-3 flex-col justify-start items-start gap-8"
  >
    <div
      class="fixed top-0 left-0 w-[25dvw] h-dvh -z-50 backdrop-blur-lg bg-black/40"
    >
    </div>

    <div class="flex justify-end w-full pt-3 pr-1.5 mb-12 group">
      <span
        id="close-burger-menu"
        class="flex cursor-pointer bg-light-bg/30 backdrop-blur-lg rounded-full p-1"
      >
        <CloseIcon class={"text-light-bg size-7 "} />
      </span>
    </div>
    <div class="w-full px-6 justify-between items-start flex flex-col gap-16">
      <ul
        id="mobile-menu-links"
        class="flex flex-col justify-center gap-1.5 max-w-7xl text-4xl font-semibold capitalize text-light-bg mb-4 transition-all ease-in-out duration-300"
      >
        <li class="hover:underline hover:text-badge">
          <a href="/recipes" title="Explore Recipes" aria-label="Recipes"
            >Recipes</a
          >
        </li>
        <li class="hover:underline hover:text-badge">
          <a href="/products" title="View Products" aria-label="Products"
            >Products</a
          >
        </li>
        <li class="hover:underline hover:text-badge">
          <a href="/about-us" title="About Us" aria-label="About Us">About Us</a
          >
        </li>
        <li class="hover:underline hover:text-badge">
          <a href="/contact-us" title="Contact Us" aria-label="Contact Us"
            >Contact Us</a
          >
        </li>
      </ul>

      <div class="flex flex-col gap-4 mt-12">
        <h3 class="text-2xl text-[white] font-bold mb-2">Follow Us</h3>
        <div class="flex gap-3">
          <a
            aria-label="Facebook"
            title="Facebook"
            href="https://www.facebook.com/alefoodsperu"
            target="_blank"
            class="w-10 h-10 bg-[#fdfcf7] rounded-full flex items-center justify-center transition-colors ease-out duration-350 hover:bg-dark-bg hover:border-[#fdfcf7] hover:border-2 group"
          >
            <FacebookIcon
              class={"size-5 text-dark-bg  group-hover:text-[#fdfcf7]"}
            />
          </a>
          <a
            aria-label="TikTok"
            title="TikTok"
            href="https://www.tiktok.com/@irides.pe"
            target="_blank"
            class="w-10 h-10 bg-[#fdfcf7] rounded-full flex items-center justify-center transition-colors ease-out duration-350 hover:bg-dark-bg hover:border-[#fdfcf7] hover:border-2 group"
          >
            <TiktokIcon
              class={"size-5 text-dark-bg group-hover:text-[#fdfcf7]"}
              color={"#0D2C54"}
            />
          </a>
          <a
            aria-label="Instagram"
            title="Instagram"
            href="https://www.instagram.com/irides.pe"
            target="_blank"
            class="w-10 h-10 bg-[#fdfcf7] rounded-full flex items-center justify-center transition-colors ease-out duration-350 hover:bg-dark-bg hover:border-[#fdfcf7] hover:border-2 group"
          >
            <InstagramIcon
              class={"size-5 text-dark-bg  group-hover:text-[#fdfcf7]"}
            />
          </a>
        </div>
      </div>
    </div>
  </aside>
</section>
<hr class="text-[#6f4e37] max-w-7xl mx-auto" />

<script>
  function toggleAsideMenu() {
    const burgerBtn = document.getElementById("burguer-menu");
    const closeBurgerBtn = document.getElementById("close-burger-menu");
    const mobileMenu = document.getElementById("mobile-menu");
    const mobileMenuLinks = document.getElementById("mobile-menu-links");

    burgerBtn?.addEventListener("click", () => {
      mobileMenu?.classList.toggle("hidden");
      mobileMenu?.classList.toggle("flex");
    });

    closeBurgerBtn?.addEventListener("click", () => {
      mobileMenu?.classList.add("hidden");
      mobileMenu?.classList.remove("flex");
    });

    mobileMenuLinks?.querySelectorAll("a").forEach((link) => {
      link.addEventListener("click", () => {
        mobileMenu?.classList.add("hidden");
        mobileMenu?.classList.remove("flex");
      });
    });
  }

  document.addEventListener("astro:page-load", toggleAsideMenu);
</script>
